<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blasteroids - Retro Space Game</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/lucide@latest/dist/umd/lucide.js" rel="stylesheet">
    <style>
        :root {
            /* Color System */
            --canvas-bg: #000000;
            --ui-panel-bg: rgba(20, 20, 20, 0.6);
            --accent: #F5D94D;
            --accent-glow: rgba(245, 217, 77, 0.4);
            --entity-primary: #FFFFFF;
            --text-primary: #E4E4E7;
            --text-secondary: #A0A0A5;
            --danger: #FF453A;
            --danger-glow: rgba(255, 69, 58, 0.5);
            
            /* Typography */
            --font-primary: 'JetBrains Mono', monospace;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-primary);
            background: var(--canvas-bg);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }
        
        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        .player-hud {
            position: absolute;
            top: 24px;
            width: 240px;
            background: #141414;
            border: 1px solid;
            border-radius: 4px;
            padding: 16px;
            pointer-events: none;
        }
        
        .player-hud.p1 {
            left: 24px;
            border-color: #00FFFF;
        }
        
        .player-hud.p2 {
            right: 24px;
            border-color: #FF00FF;
        }
        
        .player-label {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .player-hud.p1 .player-label {
            color: #00FFFF;
        }
        
        .player-hud.p2 .player-label {
            color: #FF00FF;
        }
        
        .score-display {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }
        
        .boost-indicators {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .boost-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0;
            transform: scale(0.8);
            animation: boostAppear 200ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        
        @keyframes boostAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .boost-indicator.disappearing {
            animation: boostDisappear 250ms ease-out forwards;
        }
        
        @keyframes boostDisappear {
            0%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.3; }
        }
        
        .boost-icon {
            width: 24px;
            height: 24px;
        }
        
        .boost-timer {
            width: 48px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .boost-timer-bar {
            height: 100%;
            width: 100%;
            transition: width 0.1s linear;
        }
        
        .game-over-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            background: var(--ui-panel-bg);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            padding: 48px;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: all 250ms ease-out;
            max-width: 480px;
            width: 90%;
        }
        
        .game-over-modal.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }
        
        .game-over-title {
            font-size: 61px;
            font-weight: 700;
            color: var(--danger);
            text-shadow: 0 0 16px var(--danger-glow);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 24px;
        }
        
        .final-score-label {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .final-score-value {
            font-size: 39px;
            font-weight: 600;
            color: var(--accent);
            text-shadow: 0 0 16px var(--accent-glow);
            margin-bottom: 32px;
        }
        
        .restart-button {
            height: 48px;
            padding: 0 24px;
            background: transparent;
            border: 1px solid var(--text-primary);
            border-radius: 4px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 16px;
            font-weight: 400;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 200ms ease-out;
            pointer-events: auto;
        }
        
        .restart-button:hover {
            border-color: var(--accent);
            color: var(--accent);
            box-shadow: 0 0 12px var(--accent-glow);
        }
        
        .restart-button:active {
            transform: scale(0.98);
        }
        
        .instructions {
            position: absolute;
            bottom: 120px;
            left: 24px;
            font-size: 16px;
            color: var(--text-secondary);
            line-height: 1.6;
            pointer-events: none;
        }
        
        .boost-notification {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            font-size: 32px;
            font-weight: 700;
            text-transform: uppercase;
            opacity: 0;
            pointer-events: none;
            z-index: 5;
            animation: boostNotification 1500ms ease-out forwards;
        }
        
        @keyframes boostNotification {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.2); }
        }
        
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #141414 0%, #000000 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        
        .start-screen.hidden {
            display: none;
        }
        
        .game-title {
            font-size: 72px;
            font-weight: 700;
            color: var(--accent);
            text-shadow: 0 0 32px var(--accent-glow);
            margin-bottom: 32px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .mode-selection {
            display: flex;
            gap: 32px;
            margin-bottom: 48px;
        }
        
        .mode-button {
            width: 200px;
            height: 120px;
            background: transparent;
            border: 2px solid var(--text-primary);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 200ms ease-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .mode-button:hover,
        .mode-button.selected {
            border-color: var(--accent);
            color: var(--accent);
            box-shadow: 0 0 24px var(--accent-glow);
            transform: scale(1.05);
        }
        
        .mode-button:active {
            transform: scale(0.98);
        }
        
        .mode-icon {
            font-size: 48px;
        }
        
        .lives-display {
            font-size: 18px;
            font-weight: 500;
            margin-top: 16px;
        }
        
        .player-hud.p2.alive {
            opacity: 1;
            pointer-events: none;
        }
        
        .player-hud.p2.dead {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .lives-icons {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }
        
        .life-icon {
            color: inherit;
            opacity: 0.8;
        }
        
        .life-icon.lost {
            opacity: 0.2;
        }
        
        .mobile-controls {
            position: fixed;
            bottom: 32px;
            width: 100%;
            display: none;
            pointer-events: auto;
        }
        
        .controls-left {
            position: absolute;
            left: 32px;
            bottom: 0;
            display: flex;
            gap: 16px;
        }
        
        .controls-right {
            position: absolute;
            right: 32px;
            bottom: 0;
            display: flex;
            gap: 16px;
        }
        
        .escape-menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: var(--ui-panel-bg);
            backdrop-filter: blur(12px);
            border: 2px solid var(--accent);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: all 200ms cubic-bezier(0.34, 1.56, 0.64, 1);
            min-width: 280px;
            z-index: 200;
        }
        
        .escape-menu.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }
        
        .escape-menu-title {
            font-size: 36px;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 32px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .menu-option {
            font-size: 20px;
            color: var(--text-primary);
            margin: 16px 0;
            padding: 12px 24px;
            border: 1px solid transparent;
            border-radius: 4px;
            transition: all 150ms ease-out;
            cursor: pointer;
            user-select: none;
        }
        
        .menu-option:hover, .menu-option.selected {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(245, 217, 77, 0.1);
            box-shadow: 0 0 16px var(--accent-glow);
        }
        
        .save-slots {
            margin-top: 24px;
            opacity: 0;
            pointer-events: none;
            transition: all 200ms ease-out;
        }
        
        .save-slots.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .save-slots-title {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            text-align: center;
        }
        
        .save-slots-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 300px;
            margin: 0 auto;
        }
        
        .save-slot {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid var(--text-primary);
            border-radius: 6px;
            padding: 12px;
            cursor: pointer;
            transition: all 200ms ease-out;
            text-align: left;
            min-height: 60px;
            position: relative;
        }
        
        .save-slot:hover,
        .save-slot.selected,
        .save-slot:focus {
            border-color: var(--accent);
            box-shadow: 0 0 12px var(--accent-glow);
            background: rgba(30, 30, 30, 0.9);
            outline: none;
        }
        
        .slot-number {
            font-size: 12px;
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 4px;
        }
        
        .slot-status {
            font-size: 11px;
            color: var(--text-secondary);
        }
        
        .slot-status.has-save {
            color: var(--text-primary);
        }
        
        .slot-date {
            font-size: 10px;
            color: var(--text-secondary);
            margin-top: 2px;
            opacity: 0.8;
        }
        
        .keyboard-hint {
            position: fixed;
            top: 24px;
            right: 24px;
            font-size: 14px;
            color: var(--text-secondary);
            opacity: 0.6;
        }
        
        .control-button {
            width: 96px;
            height: 96px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            font-size: 32px;
            cursor: pointer;
            transition: all 200ms ease-out;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight: transparent;
        }
        
        .control-button:active {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(0.95);
        }
        
        .control-button:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        @media (max-width: 768px) {
            .mobile-controls {
                display: block;
            }
            
            .player-hud {
                width: 200px;
                font-size: 14px;
            }
            
            .player-label {
                font-size: 18px;
            }
            
            .score-display {
                font-size: 32px;
            }
            
            .instructions {
                left: 16px;
                right: 16px;
                font-size: 14px;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-controls {
                display: none;
            }
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div class="ui-overlay">
        <div class="player-hud p1">
            <div class="player-label">PLAYER 1</div>
            <div class="score-display" id="scoreDisplay1">0</div>
            <div class="lives-display">
                LIVES: <span id="livesDisplay1">6</span>
                <div class="lives-icons" id="livesIcons1">
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                </div>
            </div>
            <div class="boost-indicators" id="boostIndicators1"></div>
        </div>
        
        <div class="player-hud p2 alive">
            <div class="player-label">PLAYER 2</div>
            <div class="score-display" id="scoreDisplay2">0</div>
            <div class="lives-display">
                LIVES: <span id="livesDisplay2">6</span>
                <div class="lives-icons" id="livesIcons2">
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                    <span class="life-icon">‚óÜ</span>
                </div>
            </div>
            <div class="boost-indicators" id="boostIndicators2"></div>
        </div>
        
        <div class="instructions">
            <strong>PLAYER 1:</strong> WASD + SPACE<br>
            <strong>PLAYER 2:</strong> ARROW KEYS + ENTER<br>
            Destroy asteroids and collect boost power-ups!
        </div>
        
        <div class="keyboard-hint">Press ESC for menu</div>
    </div>
    
    <div class="start-screen" id="startScreen">
        <div class="game-title">BLASTEROIDS</div>
        <div class="mode-selection">
            <div class="mode-button" id="singlePlayerBtn" tabindex="0">
                <div class="mode-icon">üöÄ</div>
                <div>SINGLE PLAYER</div>
            </div>
            <div class="mode-button" id="multiplayerBtn" tabindex="0">
                <div class="mode-icon">‚öîÔ∏è</div>
                <div>MULTIPLAYER</div>
            </div>
            <div class="mode-button" id="loadGameBtn" tabindex="0">
                <div class="mode-icon">üíæ</div>
                <div>LOAD GAME</div>
            </div>
        </div>
        <div id="saveGameStatus" style="font-size: 14px; color: var(--text-secondary); margin-top: 8px; text-align: center;">
            No saved game found
        </div>
        <div style="font-size: 16px; color: var(--text-secondary); text-align: center; margin-top: 32px;">
            Each player starts with 6 lives<br>
            Destroy asteroids to score points<br>
            Collect glowing asteroids for temporary power-ups<br><br>
            <strong>CONTROLS:</strong><br>
            Single Player: WASD + Space<br>
            Multiplayer: P1 (WASD + Space), P2 (Arrow Keys + Enter)<br><br>
            <strong>MENU:</strong> Press ESC anytime for save/load menu
        </div>
    </div>
    
    <div class="game-over-modal" id="gameOverModal">
        <div class="game-over-title">GAME OVER</div>
        <div class="final-score-label">PLAYER 1 SCORE:</div>
        <div class="final-score-value" id="finalScore1">0</div>
        <div class="final-score-label">PLAYER 2 SCORE:</div>
        <div class="final-score-value" id="finalScore2">0</div>
        <div class="restart-button" id="restartButton" tabindex="0">Restart</div>
    </div>
    
    <div class="escape-menu" id="escapeMenu">
        <div class="escape-menu-title" id="escapeMenuTitle">PAUSE MENU</div>
        <div class="menu-option" id="menuResume" tabindex="0">RESUME GAME</div>
        <div class="menu-option" id="menuSave" tabindex="0">SAVE GAME</div>
        <div class="menu-option" id="menuLoad" tabindex="0">LOAD GAME</div>
        <div class="menu-option" id="menuMainMenu" tabindex="0">MAIN MENU</div>
        
        <div class="save-slots" id="saveSlots">
            <div class="save-slots-title">Choose Save Slot:</div>
            <div class="save-slots-grid">
                <div class="save-slot" data-slot="0" tabindex="0">
                    <div class="slot-number">SLOT 1</div>
                    <div class="slot-status">Empty</div>
                </div>
                <div class="save-slot" data-slot="1" tabindex="0">
                    <div class="slot-number">SLOT 2</div>
                    <div class="slot-status">Empty</div>
                </div>
                <div class="save-slot" data-slot="2" tabindex="0">
                    <div class="slot-number">SLOT 3</div>
                    <div class="slot-status">Empty</div>
                </div>
                <div class="save-slot" data-slot="3" tabindex="0">
                    <div class="slot-number">SLOT 4</div>
                    <div class="slot-status">Empty</div>
                </div>
                <div class="save-slot" data-slot="4" tabindex="0">
                    <div class="slot-number">SLOT 5</div>
                    <div class="slot-status">Empty</div>
                </div>
                <div class="save-slot" data-slot="5" tabindex="0">
                    <div class="slot-number">SLOT 6</div>
                    <div class="slot-status">Empty</div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="blasteroids.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>
</html>
